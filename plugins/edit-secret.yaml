apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: edit-secret
spec:
  version: v0.1.0
  homepage: https://github.com/BardiaYaghmaie/kubectl-edit-secret
  shortDescription: Edit Kubernetes secrets with decoded values
  description: |
    Edit Kubernetes secrets by decoding base64 values, opening them in your 
    preferred text editor, and automatically re-encoding and applying changes.
    
    This plugin simplifies secret management by removing the need to manually
    decode and encode base64 values when editing secrets.
    
    Features:
    - Edit all keys in a secret or a specific key
    - Automatic base64 decoding before edit and encoding after
    - Uses your preferred editor ($KUBE_EDITOR, $EDITOR, or --editor flag)
    - Shows decoded values in a clean YAML format
    - Supports all kubectl flags (namespace, context, kubeconfig, etc.)
    
    Examples:
      # Edit all keys in a secret
      kubectl edit-secret my-secret
      
      # Edit a specific key
      kubectl edit-secret my-secret password
      
      # Edit in a specific namespace
      kubectl edit-secret my-secret -n production
  caveats: |
    This plugin requires an editor to be available. Set $EDITOR or $KUBE_EDITOR,
    or use the --editor flag to specify your preferred editor.
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/BardiaYaghmaie/kubectl-edit-secret/releases/download/v0.1.0/kubectl-edit-secret_linux_amd64.tar.gz
    sha256: "REPLACE_WITH_ACTUAL_SHA256"
    bin: kubectl-edit_secret
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/BardiaYaghmaie/kubectl-edit-secret/releases/download/v0.1.0/kubectl-edit-secret_linux_arm64.tar.gz
    sha256: "REPLACE_WITH_ACTUAL_SHA256"
    bin: kubectl-edit_secret
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/BardiaYaghmaie/kubectl-edit-secret/releases/download/v0.1.0/kubectl-edit-secret_darwin_amd64.tar.gz
    sha256: "REPLACE_WITH_ACTUAL_SHA256"
    bin: kubectl-edit_secret
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/BardiaYaghmaie/kubectl-edit-secret/releases/download/v0.1.0/kubectl-edit-secret_darwin_arm64.tar.gz
    sha256: "REPLACE_WITH_ACTUAL_SHA256"
    bin: kubectl-edit_secret
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/BardiaYaghmaie/kubectl-edit-secret/releases/download/v0.1.0/kubectl-edit-secret_windows_amd64.zip
    sha256: "REPLACE_WITH_ACTUAL_SHA256"
    bin: kubectl-edit_secret.exe

