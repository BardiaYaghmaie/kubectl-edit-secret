apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: edit-secret
spec:
  version: v0.1.0
  homepage: https://github.com/BardiaYaghmaie/kubectl-edit-secret
  shortDescription: Edit Kubernetes secrets with decoded values
  description: |
    Edit Kubernetes secrets by decoding base64 values, opening them in your 
    preferred text editor, and automatically re-encoding and applying changes.
    
    This plugin simplifies secret management by removing the need to manually
    decode and encode base64 values when editing secrets.
    
    Features:
    - Edit all keys in a secret or a specific key
    - Automatic base64 decoding before edit and encoding after
    - Uses your preferred editor ($KUBE_EDITOR, $EDITOR, or --editor flag)
    - Shows decoded values in a clean YAML format
    - Supports all kubectl flags (namespace, context, kubeconfig, etc.)
    
    Examples:
      # Edit all keys in a secret
      kubectl edit-secret my-secret
      
      # Edit a specific key
      kubectl edit-secret my-secret password
      
      # Edit in a specific namespace
      kubectl edit-secret my-secret -n production
  caveats: |
    This plugin requires an editor to be available. Set $EDITOR or $KUBE_EDITOR,
    or use the --editor flag to specify your preferred editor.
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/BardiaYaghmaie/kubectl-edit-secret/releases/download/v0.1.0/kubectl-edit-secret_linux_amd64.tar.gz
    sha256: e1b3067280b713954f1478112a7f0653b9d912d1d8489fb8c9e26e55b15baba8
    bin: kubectl-edit_secret
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/BardiaYaghmaie/kubectl-edit-secret/releases/download/v0.1.0/kubectl-edit-secret_linux_arm64.tar.gz
    sha256: 1ea0280c2529d6f3f632472f48071f4c3eab074cec536c237c018409d97ab2de
    bin: kubectl-edit_secret
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/BardiaYaghmaie/kubectl-edit-secret/releases/download/v0.1.0/kubectl-edit-secret_darwin_amd64.tar.gz
    sha256: aa06882d4efb5fd7c3e7ee50bf7d13b2121af4c884baef2640ae342b5043cd4c
    bin: kubectl-edit_secret
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/BardiaYaghmaie/kubectl-edit-secret/releases/download/v0.1.0/kubectl-edit-secret_darwin_arm64.tar.gz
    sha256: 051d143c2eb16aaa3e2a364e5f11248d0c166be0e6c7539c79956d96b497b8f8
    bin: kubectl-edit_secret
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/BardiaYaghmaie/kubectl-edit-secret/releases/download/v0.1.0/kubectl-edit-secret_windows_amd64.zip
    sha256: 79777dad056d4e3ed606d4a7e9bbf7b67bc1ebced60ecc1a2e0ed99b5e9f1f0a
    bin: kubectl-edit_secret.exe
